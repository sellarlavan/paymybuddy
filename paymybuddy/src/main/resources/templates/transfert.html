<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Pay My Buddy - Transférer</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
    <nav class="navbar">
        <div class="nav-brand">Pay My Buddy</div>
        <ul class="nav-menu">
            <li><a th:href="@{/transfert}" class="active">Transférer</a></li>
            <li><a th:href="@{/profile}">Profil</a></li>
            <li><a th:href="@{/connection}">Ajouter relation</a></li>
            <li><a th:href="@{/logout}">Se déconnecter</a></li>
        </ul>
    </nav>

    <main class="transfer-main">

        <form class="transfer-form" th:action="@{/transfert}" method="post">
            <select class="transfer-select" name="receiverEmail" required>
                <option value="">Sélectionner une relation</option>
                <option th:each="contact : ${contacts}"
                        th:value="${contact.email}"
                        th:text="${contact.email}">
                </option>
            </select>

            <input type="text" class="transfer-description" name="description" placeholder="Description">
            <input type="number" class="transfer-amount-input" name="amount" value="0" min="0" step="0.01" required>
            <button type="submit" class="pay-btn">Payer</button>
        </form>

        <div class="user-balance">
            <p><strong>Votre solde :</strong> <span th:text="${balance + ' €'}"></span></p>
        </div>

        <div th:if="${param.success}">
            <p class="success">Transaction effectuée avec succès.</p>
        </div>

        <div th:if="${error}">
            <p class="error" th:text="${error}"></p>
        </div>

        <div class="transactions-section">
            <div class="transactions-container">
                <h2 class="transactions-title">Mes Transactions</h2>
                <table class="transactions-table">
                    <thead>
                    <tr>
                        <th>Relations</th>
                        <th>Description</th>
                        <th>Montant</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr th:each="transaction : ${transactions}">
                        <td th:text="${transaction.contactUsername}">Nom</td>
                        <td th:text="${transaction.description}">Description</td>
                        <td>
                            <span th:if="${transaction.sent}" th:text="'-' + ${transaction.amount} + ' €'" class="amount-negative">-10€</span>
                            <span th:if="${!transaction.sent}" th:text="${transaction.amount} + ' €'" class="amount-positive">+10€</span>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </main>
</body>
</html>
